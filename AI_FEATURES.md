# AI åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬ç³»ç»Ÿå·²é›†æˆå¼ºå¤§çš„AIåŠŸèƒ½ï¼Œåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ºé‡åŒ–äº¤æ˜“æä¾›æ™ºèƒ½åŒ–æ”¯æŒã€‚

## åŠŸèƒ½åˆ—è¡¨

### 1. ğŸ“Š AIå¸‚åœºåˆ†æ

**åŠŸèƒ½æè¿°**ï¼š
- åˆ†ææŒ‡å®šäº¤æ˜“å¯¹çš„å¸‚åœºè¶‹åŠ¿
- æä¾›æŠ€æœ¯é¢åˆ†æå’Œæ”¯æ’‘é˜»åŠ›ä½
- ç»™å‡ºçŸ­æœŸã€ä¸­æœŸã€é•¿æœŸè¶‹åŠ¿é¢„æµ‹
- ç»“åˆæ–°é—»è¿›è¡Œç»¼åˆåˆ†æ

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# APIè°ƒç”¨ç¤ºä¾‹
POST /api/v1/ai/analyze-market
{
  "symbol": "BTC/USDT",
  "exchange": "binance_public",
  "include_news": false
}
```

**å‰ç«¯ä½¿ç”¨**ï¼š
1. è¿›å…¥"AIåŠ©æ‰‹"é¡µé¢
2. é€‰æ‹©"å¸‚åœºåˆ†æ"æ ‡ç­¾
3. è¾“å…¥äº¤æ˜“å¯¹å’Œäº¤æ˜“æ‰€
4. ç‚¹å‡»"å¼€å§‹åˆ†æ"

### 2. âš¡ AIç­–ç•¥ç”Ÿæˆ

**åŠŸèƒ½æè¿°**ï¼š
- æ ¹æ®è‡ªç„¶è¯­è¨€æè¿°è‡ªåŠ¨ç”Ÿæˆäº¤æ˜“ç­–ç•¥ä»£ç 
- æ”¯æŒæŠ€æœ¯åˆ†æã€åŸºæœ¬é¢åˆ†æã€æœºå™¨å­¦ä¹ ç­‰å¤šç§ç­–ç•¥ç±»å‹
- ç”Ÿæˆç¬¦åˆç³»ç»ŸBaseStrategyåŸºç±»çš„å®Œæ•´ä»£ç 
- æä¾›ç­–ç•¥è¯´æ˜å’Œä½¿ç”¨å»ºè®®

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# APIè°ƒç”¨ç¤ºä¾‹
POST /api/v1/ai/generate-strategy
{
  "description": "åŸºäºRSIå’ŒMACDçš„åŒæŒ‡æ ‡ç­–ç•¥ï¼Œå½“RSIä½äº30ä¸”MACDé‡‘å‰æ—¶ä¹°å…¥ï¼ŒRSIé«˜äº70ä¸”MACDæ­»å‰æ—¶å–å‡º",
  "strategy_type": "technical"
}
```

**å‰ç«¯ä½¿ç”¨**ï¼š
1. è¿›å…¥"AIåŠ©æ‰‹"é¡µé¢
2. é€‰æ‹©"ç­–ç•¥ç”Ÿæˆ"æ ‡ç­¾
3. è¯¦ç»†æè¿°ä½ æƒ³è¦çš„ç­–ç•¥
4. é€‰æ‹©ç­–ç•¥ç±»å‹
5. ç‚¹å‡»"ç”Ÿæˆç­–ç•¥"
6. å¤åˆ¶ç”Ÿæˆçš„ä»£ç åˆ°ç­–ç•¥ç®¡ç†ä¸­ä½¿ç”¨

### 3. ğŸ“ˆ AIäº¤æ˜“ä¿¡å·

**åŠŸèƒ½æè¿°**ï¼š
- åŸºäºå®æ—¶å¸‚åœºæ•°æ®ç”Ÿæˆäº¤æ˜“ä¿¡å·
- æä¾›ä¹°å…¥/å–å‡º/æŒæœ‰å»ºè®®
- ç»™å‡ºä¿¡å·å¼ºåº¦ï¼ˆ1-10åˆ†ï¼‰
- å»ºè®®ä»“ä½æ¯”ä¾‹
- æä¾›æ­¢æŸä½å’Œæ­¢ç›ˆä½
- è¯¦ç»†çš„åˆ†æç†ç”±

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# APIè°ƒç”¨ç¤ºä¾‹
POST /api/v1/ai/trading-signal
{
  "symbol": "BTC/USDT",
  "exchange": "binance_public",
  "timeframe": "1h",
  "limit": 100
}
```

**å‰ç«¯ä½¿ç”¨**ï¼š
1. è¿›å…¥"AIåŠ©æ‰‹"é¡µé¢
2. é€‰æ‹©"äº¤æ˜“ä¿¡å·"æ ‡ç­¾
3. è¾“å…¥äº¤æ˜“å¯¹ã€äº¤æ˜“æ‰€å’Œæ—¶é—´å‘¨æœŸ
4. ç‚¹å‡»"è·å–ä¿¡å·"
5. æŸ¥çœ‹ä¿¡å·è¯¦æƒ…å’Œå»ºè®®

### 4. ğŸ’¬ AIæ™ºèƒ½é—®ç­”

**åŠŸèƒ½æè¿°**ï¼š
- å›ç­”é‡åŒ–äº¤æ˜“ç›¸å…³é—®é¢˜
- è§£é‡ŠæŠ€æœ¯æŒ‡æ ‡å’Œç­–ç•¥
- æä¾›å¸‚åœºçŸ¥è¯†å’Œäº¤æ˜“å»ºè®®
- æ”¯æŒä¸Šä¸‹æ–‡å¯¹è¯

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# APIè°ƒç”¨ç¤ºä¾‹
POST /api/v1/ai/ask
{
  "question": "ä»€ä¹ˆæ˜¯MACDæŒ‡æ ‡ï¼Ÿå¦‚ä½•ä½¿ç”¨å®ƒè¿›è¡Œäº¤æ˜“ï¼Ÿ"
}
```

**å‰ç«¯ä½¿ç”¨**ï¼š
1. è¿›å…¥"AIåŠ©æ‰‹"é¡µé¢
2. é€‰æ‹©"æ™ºèƒ½é—®ç­”"æ ‡ç­¾
3. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
4. æŒ‰Ctrl+Enteræˆ–ç‚¹å‡»"å‘é€"
5. æŸ¥çœ‹AIå›ç­”

### 5. ğŸ”§ AIç­–ç•¥ä¼˜åŒ–

**åŠŸèƒ½æè¿°**ï¼š
- åˆ†æç­–ç•¥å›æµ‹ç»“æœ
- æä¾›å‚æ•°ä¼˜åŒ–å»ºè®®
- æŒ‡å‡ºç­–ç•¥çš„ä¼˜ç¼ºç‚¹
- ç»™å‡ºæ”¹è¿›æ–¹å‘

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# APIè°ƒç”¨ç¤ºä¾‹
POST /api/v1/ai/optimize-strategy
{
  "strategy_code": "class MyStrategy(BaseStrategy): ...",
  "backtest_results": [...]
}
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å‚æ•°ï¼š

```bash
# OpenAIé…ç½®
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo
```

### æ”¯æŒçš„æ¨¡å‹

- **OpenAI GPT-3.5-turbo**ï¼šå¿«é€Ÿå“åº”ï¼Œæˆæœ¬è¾ƒä½
- **OpenAI GPT-4**ï¼šæ›´å¼ºå¤§çš„åˆ†æèƒ½åŠ›ï¼Œæˆæœ¬è¾ƒé«˜
- **å…¶ä»–å…¼å®¹OpenAI APIçš„æ¨¡å‹**ï¼šå¯é€šè¿‡ä¿®æ”¹BASE_URLä½¿ç”¨

### æ›¿ä»£æ–¹æ¡ˆ

å¦‚æœä¸æƒ³ä½¿ç”¨OpenAIï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š

1. **æœ¬åœ°æ¨¡å‹**ï¼šä½¿ç”¨Ollamaç­‰å·¥å…·éƒ¨ç½²æœ¬åœ°LLM
2. **å›½å†…API**ï¼šä½¿ç”¨ç™¾åº¦æ–‡å¿ƒä¸€è¨€ã€é˜¿é‡Œé€šä¹‰åƒé—®ç­‰
3. **å¼€æºæ¨¡å‹**ï¼šä½¿ç”¨HuggingFaceä¸Šçš„å¼€æºæ¨¡å‹

ä¿®æ”¹ `backend/app/services/ai_service.py` ä¸­çš„å®¢æˆ·ç«¯åˆå§‹åŒ–ä»£ç å³å¯ã€‚

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç”Ÿæˆå‡çº¿ç­–ç•¥

**è¾“å…¥æè¿°**ï¼š
```
åˆ›å»ºä¸€ä¸ªåŒå‡çº¿ç­–ç•¥ï¼š
- ä½¿ç”¨5æ—¥å‡çº¿å’Œ20æ—¥å‡çº¿
- å½“5æ—¥å‡çº¿ä¸Šç©¿20æ—¥å‡çº¿æ—¶ä¹°å…¥
- å½“5æ—¥å‡çº¿ä¸‹ç©¿20æ—¥å‡çº¿æ—¶å–å‡º
- æ¯æ¬¡ä½¿ç”¨90%çš„å¯ç”¨èµ„é‡‘
- åŒ…å«åŸºæœ¬çš„é£é™©æ§åˆ¶
```

**ç”Ÿæˆç»“æœ**ï¼š
```python
class MAStrategy(BaseStrategy):
    def __init__(self, params: Dict[str, Any] = None):
        super().__init__(params)
        self.short_period = self.params.get('short_period', 5)
        self.long_period = self.params.get('long_period', 20)
        self.prices = []
        self.position_size = 0.9
    
    def on_bar(self, bar: Dict[str, Any]):
        self.current_bar = bar
        self.prices.append(bar['close'])
        
        if len(self.prices) > self.long_period:
            self.prices.pop(0)
        
        if len(self.prices) >= self.long_period:
            short_ma = sum(self.prices[-self.short_period:]) / self.short_period
            long_ma = sum(self.prices[-self.long_period:]) / self.long_period
            
            position = self.get_position()
            
            # é‡‘å‰ä¹°å…¥
            if short_ma > long_ma and not position:
                amount = self.capital * self.position_size / bar['close']
                self.buy(bar['close'], amount)
            
            # æ­»å‰å–å‡º
            elif short_ma < long_ma and position:
                self.sell(bar['close'], position.get('amount', 0))
```

### ç¤ºä¾‹2ï¼šè·å–BTCäº¤æ˜“ä¿¡å·

**è¯·æ±‚**ï¼š
```json
{
  "symbol": "BTC/USDT",
  "exchange": "binance_public",
  "timeframe": "1h"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "signal": "BUY",
  "strength": 7,
  "position": 60,
  "stop_loss": "42500",
  "take_profit": "45000",
  "reason": "æŠ€æœ¯é¢åˆ†ææ˜¾ç¤ºï¼š\n1. RSIä»è¶…å–åŒºåŸŸåå¼¹è‡³45ï¼Œæ˜¾ç¤ºä¹°ç›˜åŠ›é‡å¢å¼º\n2. MACDå³å°†å½¢æˆé‡‘å‰ï¼ŒçŸ­æœŸè¶‹åŠ¿è½¬å¼º\n3. ä»·æ ¼çªç ´20æ—¥å‡çº¿ï¼Œå½¢æˆæ”¯æ’‘\n4. æˆäº¤é‡æ”¾å¤§ï¼Œç¡®è®¤çªç ´æœ‰æ•ˆ\nå»ºè®®é€‚åº¦å»ºä»“ï¼Œè®¾ç½®æ­¢æŸä¿æŠ¤ã€‚"
}
```

### ç¤ºä¾‹3ï¼šå¸‚åœºåˆ†æ

**è¯·æ±‚**ï¼š
```json
{
  "symbol": "ETH/USDT",
  "exchange": "binance_public"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```
å¸‚åœºè¶‹åŠ¿åˆ†æï¼š

çŸ­æœŸè¶‹åŠ¿ï¼ˆ1-7å¤©ï¼‰ï¼š
- å½“å‰å¤„äºéœ‡è¡ä¸Šè¡Œé˜¶æ®µ
- ä»·æ ¼åœ¨2300-2400åŒºé—´æ³¢åŠ¨
- çŸ­æœŸæ”¯æ’‘ä½ï¼š2280
- çŸ­æœŸé˜»åŠ›ä½ï¼š2420

ä¸­æœŸè¶‹åŠ¿ï¼ˆ1-4å‘¨ï¼‰ï¼š
- æ•´ä½“å‘ˆç°ä¸Šå‡é€šé“
- å‡çº¿ç³»ç»Ÿå¤šå¤´æ’åˆ—
- å»ºè®®é€¢ä½ä¹°å…¥

æŠ€æœ¯é¢åˆ†æï¼š
- RSI: 58ï¼ˆä¸­æ€§åå¤šï¼‰
- MACD: é‡‘å‰å½¢æˆï¼ŒåŠ¨èƒ½å¢å¼º
- æˆäº¤é‡: é«˜äºå¹³å‡æ°´å¹³ï¼Œå¸‚åœºæ´»è·ƒ

äº¤æ˜“å»ºè®®ï¼š
1. å¯åœ¨2300é™„è¿‘å»ºç«‹å¤šå¤´ä»“ä½
2. æ­¢æŸè®¾åœ¨2250ä¸‹æ–¹
3. ç›®æ ‡ä½çœ‹å‘2500
4. å»ºè®®ä»“ä½ï¼š50-60%

é£é™©æç¤ºï¼š
- å…³æ³¨ç¾è”å‚¨æ”¿ç­–åŠ¨å‘
- æ³¨æ„æ¯”ç‰¹å¸èµ°åŠ¿å½±å“
- è®¾ç½®å¥½æ­¢æŸï¼Œæ§åˆ¶é£é™©
```

## æœ€ä½³å®è·µ

### 1. ç­–ç•¥ç”Ÿæˆ

- æè¿°è¦è¯¦ç»†å…·ä½“ï¼ŒåŒ…å«æ˜ç¡®çš„ä¹°å–æ¡ä»¶
- è¯´æ˜é£é™©æ§åˆ¶è¦æ±‚
- æŒ‡å®šæŠ€æœ¯æŒ‡æ ‡å’Œå‚æ•°èŒƒå›´
- ç”ŸæˆååŠ¡å¿…è¿›è¡Œå›æµ‹éªŒè¯

### 2. äº¤æ˜“ä¿¡å·

- ç»“åˆå¤šä¸ªæ—¶é—´å‘¨æœŸåˆ†æ
- ä¸è¦ç›²ç›®è·Ÿéšä¿¡å·ï¼Œè¦ç†è§£èƒŒåçš„é€»è¾‘
- è®¾ç½®åˆç†çš„æ­¢æŸæ­¢ç›ˆ
- æ§åˆ¶ä»“ä½ï¼Œåˆ†æ‰¹å»ºä»“

### 3. å¸‚åœºåˆ†æ

- å®šæœŸè¿›è¡Œåˆ†æï¼Œäº†è§£å¸‚åœºå˜åŒ–
- ç»“åˆåŸºæœ¬é¢å’ŒæŠ€æœ¯é¢
- å…³æ³¨é‡è¦æ”¯æ’‘é˜»åŠ›ä½
- æ³¨æ„é£é™©æç¤º

### 4. æ™ºèƒ½é—®ç­”

- é—®é¢˜è¦å…·ä½“æ˜ç¡®
- å¯ä»¥è¿½é—®ç»†èŠ‚
- ç»“åˆå®é™…æƒ…å†µåº”ç”¨å»ºè®®
- æŒç»­å­¦ä¹ ç§¯ç´¯çŸ¥è¯†

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **AIå»ºè®®ä»…ä¾›å‚è€ƒ**ï¼šä¸æ„æˆæŠ•èµ„å»ºè®®ï¼Œè¯·ç‹¬ç«‹åˆ¤æ–­
2. **é£é™©æ§åˆ¶ç¬¬ä¸€**ï¼šåŠ¡å¿…è®¾ç½®æ­¢æŸï¼Œæ§åˆ¶ä»“ä½
3. **å›æµ‹éªŒè¯**ï¼šç”Ÿæˆçš„ç­–ç•¥å¿…é¡»ç»è¿‡å……åˆ†å›æµ‹
4. **å¸‚åœºå˜åŒ–**ï¼šAIåˆ†æåŸºäºå†å²æ•°æ®ï¼Œå¸‚åœºéšæ—¶å¯èƒ½å˜åŒ–
5. **APIæˆæœ¬**ï¼šæ³¨æ„OpenAI APIçš„ä½¿ç”¨æˆæœ¬
6. **æ•°æ®å‡†ç¡®æ€§**ï¼šç¡®ä¿è¾“å…¥æ•°æ®çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§

## æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šAIåŠŸèƒ½ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `OPENAI_API_KEY` æ˜¯å¦æ­£ç¡®é…ç½®
2. éªŒè¯APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
3. æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIè®¿é—®æƒé™

### é—®é¢˜2ï¼šå“åº”é€Ÿåº¦æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ï¼ˆå¦‚gpt-3.5-turboï¼‰
2. å‡å°‘è¾“å…¥æ•°æ®é‡
3. è€ƒè™‘ä½¿ç”¨æœ¬åœ°æ¨¡å‹

### é—®é¢˜3ï¼šç”Ÿæˆçš„ç­–ç•¥ä»£ç æœ‰é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æä¾›æ›´è¯¦ç»†çš„ç­–ç•¥æè¿°
2. æŒ‡å®šæ˜ç¡®çš„æŠ€æœ¯æŒ‡æ ‡å’Œå‚æ•°
3. ç”Ÿæˆåæ‰‹åŠ¨æ£€æŸ¥å’Œè°ƒæ•´ä»£ç 
4. è¿›è¡Œå……åˆ†çš„å›æµ‹éªŒè¯

## æŠ€æœ¯æ¶æ„

```
å‰ç«¯ (Vue3)
    â†“
APIå±‚ (/api/v1/ai/*)
    â†“
AIæœåŠ¡å±‚ (ai_service.py)
    â†“
OpenAI API / å…¶ä»–LLM
```

## æ‰©å±•å¼€å‘

å¦‚éœ€æ·»åŠ æ–°çš„AIåŠŸèƒ½ï¼š

1. åœ¨ `ai_service.py` ä¸­æ·»åŠ æ–°æ–¹æ³•
2. åœ¨ `ai.py` ä¸­æ·»åŠ æ–°çš„APIç«¯ç‚¹
3. åœ¨å‰ç«¯æ·»åŠ å¯¹åº”çš„UIç»„ä»¶
4. æ›´æ–°è·¯ç”±å’ŒAPIè°ƒç”¨

## æ›´æ–°æ—¥å¿—

- **v1.0.0** (2024-12-06)
  - åˆå§‹ç‰ˆæœ¬
  - æ”¯æŒå¸‚åœºåˆ†æã€ç­–ç•¥ç”Ÿæˆã€äº¤æ˜“ä¿¡å·ã€æ™ºèƒ½é—®ç­”
  - é›†æˆOpenAI GPTæ¨¡å‹

## åé¦ˆä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤Issueåˆ°é¡¹ç›®ä»“åº“
- å‘é€é‚®ä»¶åˆ°æŠ€æœ¯æ”¯æŒ
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£è·å–æ›´å¤šä¿¡æ¯
